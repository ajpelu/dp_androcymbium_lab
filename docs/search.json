[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Download and process the dataset from GBIF",
    "section": "",
    "text": "This document outlines the process of downloading, processing, and analyzing data from the GBIF dataset Monitoring data on the effect of domestic livestock and rabbits on Androcymbium europaeum pastures. The dataset contains information about the annual monitoring of the effect of herbivorism on the conservation status of endangered species Androcymbium europaeum. It has been generated from the SERPAM Department (Evaluation, Restoration and Protection of Mediterranean Agrosystems Service) of the Zaidín Experimental Station belonging to Spanish National Research Council (CSIC-EEZ).\n\n\nThe dataset Monitoring data on the effect of domestic livestock and rabbits on Androcymbium europaeum pastures (Pérez-Luque et al., 2023) is deposited in GBIF. It can be access at doi:10.15470/jpjhuu and here.\nSince 2010, the SERPAM Department has been carrying out annual sampling to evaluate the effect of domestic and wild livestock (e.g. rabbits) on the pastures inhabited by Androcymbium europaeum.\nA randomized block design was followed, and consisted of 6 blocks separated between 300 and 400 m, with three different treatments or management types (one plot of 2.5 x 2.5 m by treatment and block) (Figure 1):\n\nG+R+: herbivory by sheep and rabbits\nG-R+: excluding only sheep (fenced with hunting netting)\nG-R-: excluding rabbits and sheep (fenced with rhomboidal netting of 4 cm of light)\n\n\n\n\nFigure 1: Treatments.\n\n\n\n\nThe density of A. europaeum in each plot was yearly evaluated by counting the number of individuals in 50 cm x 50 cm fix squares, taking four squares per plot, distributed according to the four cardinal points (N, S, E and W): 24 squares per treatment (six blocks by four squares)(Figure 2). The exclusion plots were installed in May 2010, after the first density and biodiversity samplings (March and April), thus this year should be considered as year zero, without exclusion treatments.\n\n\n\nFigure 2: Sampling plots. In each plot (2.5 x 2.5m), there were set 4 quadrat count (50x50 cm) and 2 transect lines (2m).\n\n\n\n\n\nThe evaluation of plant communities where A. europaeum lives was conducted annually during the spring season to ensure that most annual species had grown and flowered, allowing for accurate identification. In each plot, two fixed cross transects measuring 2 meters in length were established (Figure 2). The point-intercept method (Elzinga et al., 2001) was employed, with 50 points surveyed per transect. These points were spaced 4 cm apart, and the plant species in contact with a 2 mm needle were recorded. For each transect the following variables were determined:\n\nspecific vegetation cover: percentage of soil covered by each plant species\nplant species richness: number of species\nShannon diversity index \\(\\text{H'} = -\\sum p_i \\cdot \\ln(p_i)\\)\nvegetation cover: percentage of soil covered by vegetation\ntotal specific cover: sum of the specific vegetation cover of each species\nmusk/lichen cover: percentage of soil covered by musk or lichen\nbare soil cover: percentage of bare soil"
  },
  {
    "objectID": "index.html#abundance-data",
    "href": "index.html#abundance-data",
    "title": "Download and process the dataset from GBIF",
    "section": "Abundance data",
    "text": "Abundance data\nFirst we have created 18 events with the spatial characteristics of the plots. Each of this event has an unique id (eventID field in the table event). For the abundance data of A. europaeum, in each plot, we have 4 quadrats, which are visited annually. For each of these quadrats, events with their spatial characteristics were created. These events are related to the parent events (plots) by means of the parentEventID field in the event table. The name of each quadrats is a combination of the parent’s plot name plus the replicate’s name. For instance the A10_QS name of a quadrats correspond to the plot A10 and the south quadrat (QS stands for replicate south). The four quadrats of each plot are named: QN: northern, QS: southern, QW: western and QE eastern one.\nThen, each quadrat is visited annually and it generates an event with the following eventID: A00_QX_00001122, where:\n\nA00 is the name of the plot (e.g. A10)\nQX is the name of the quadrat (e.g. RS)\n00001122 is the date of the visit as year, month and day (e.g. 20200204)\n\nEach quadrat data visit event is related to a quadrat event by means of the parentEventID field in the event table.\nFor each quadrat data visit event we have two related data type:\n\nmeasurement: in each visit we recorded the total count (abundance) of the quadrat for the taxa A. europaeum. So, in the extendedMeasurementOrFacts table there are a measurmentID field with the following structure: A00_QX_00001122 A00. For instance, the measurementID A10_QE_20100323 A01 corresponds to the mesurement type A01 (abundance) of the event A10_QE_20100323.\noccurrences: in each visit we recorded data of the taxa Androcymbium europaeum that is stored as an entry in the occurrence table. The field occurenceID in this table has the structure: A10_QE_20100323_01, that correspond to the occurence 01 of the eventID A10_QE_20100323. The occurrence table has also the eventID field that is related to the event table."
  },
  {
    "objectID": "index.html#assesment-of-plant-communities-1",
    "href": "index.html#assesment-of-plant-communities-1",
    "title": "Download and process the dataset from GBIF",
    "section": "Assesment of plant communities",
    "text": "Assesment of plant communities\nWe have also the same 18 event plots that created in the previous section. For each plot, we sampled two linear transects called T1 and T2. For each transect a spatial event was created following similar approach as the abundance data. So, an event called A10_T1 corresponds to the transect T1 of the plot A10. Each transect were visited annually and we created an event for each visit combined the transect event and the date. For instance, the event A11_T1_20210420 corresponds to a visit performed on April-20 of 2021 (20210420) in the transect T1 of the plot A11.\nFor each transect visit we have several types of data.\n\nOccurrence data. We recorded the presence of A. europaeum or Filago pyramidata. Those occurrence records were stored at occurrence table. For instance, a record with this occurenceID: A10_T1_20210420_02 correspond to the taxa 02 of the A10_T1_20210420 event, i.e. the transect T1 visited on April-20 of 2021.\nSpecific measurements. For each taxa, we also have different measurement in each transect. For instance, for the taxa Stipa capensis we recorded a specific plant cover in a transect in a visit. Those measurements are stored in the extendedMeasurementOrFacts table with a measurmentID. So, the measurementID A21_T1_20210420_05_V09 corresponds to the measurement V09 of the taxa 05 obtained in the transect T1 of the plot A21 on April-20 of 2021 (20210420).\nTransects measurements. We computed also some measurements at transect-level, such us, the diversity, plant species richness, total cover, among others. Those variables are also stored in the extendedMeasurementOrFacts table. Therefore, a record with the measurmentID A10_T1_20230411_V20 corresponds to the measurement V20 (in this case plant species richness) computed for the transect T1 of the plot A10 on April-1 of 2023 (20230411)."
  },
  {
    "objectID": "index.html#getting-data-for-plots",
    "href": "index.html#getting-data-for-plots",
    "title": "Download and process the dataset from GBIF",
    "section": "Getting Data for Plots",
    "text": "Getting Data for Plots\nNext, we extract and process data related to plots from the dataset\n\n# Filter events to obtain only the top-level plots\nraw_plots <- event |> \n  filter(is.na(parentEventID)) |> \n  mutate(id_plot = str_remove(eventID, \"CSIC-EEZ:SERPAM:AMOLADERAS_\")) |>\n  dplyr::select(id_plot, eventID, fieldNumber, treatment_desc = fieldNotes, footprintWKT) |> \n  separate(fieldNumber, into = c(\"block\", \"treatment\"), sep = \" \\\\| \") \n\n# Convert to spatial data if needed\ngeo_plots <- raw_plots |> \n  st_as_sf(wkt = \"footprintWKT\", crs = 25830) \n\n# Create a dataframe without spatial information\nplots <- raw_plots |> dplyr::select(-footprintWKT)"
  },
  {
    "objectID": "index.html#getting-data-for-quadrats",
    "href": "index.html#getting-data-for-quadrats",
    "title": "Download and process the dataset from GBIF",
    "section": "Getting Data for Quadrats",
    "text": "Getting Data for Quadrats\nWe proceed to extract and process data related to quadrats.\n\n# Filter events to obtain only quadrat-related data\nraw_quadrats <- event |> \n  filter(samplingProtocol == \"Quadrat count\") |> \n  filter(parentEventID %in% plots$eventID) |> \n  mutate(id_quadrat = str_sub(eventID, -2)) |> \n  mutate(id_plot = str_remove(parentEventID, \"CSIC-EEZ:SERPAM:AMOLADERAS_\")) |>\n  dplyr::select(id_quadrat, id_plot, eventID, fieldNumber, treatment_desc = fieldNotes, footprintWKT) |> \n  separate(fieldNumber, into = c(\"block\", \"treatment\"), sep = \" \\\\| \") \n\n# Convert to spatial data if needed\ngeo_quadrats <- raw_quadrats |> \n  st_as_sf(wkt = \"footprintWKT\", crs = 25830) \n\n# Create a dataframe without spatial information\nquadrats <- raw_quadrats |> dplyr::select(-footprintWKT)"
  },
  {
    "objectID": "index.html#getting-data-for-transects",
    "href": "index.html#getting-data-for-transects",
    "title": "Download and process the dataset from GBIF",
    "section": "Getting Data for Transects",
    "text": "Getting Data for Transects\nWe now extract and process data related to transects.\n\n# Filter events to obtain only transect-related data\nraw_transects <- event |> \n  filter(samplingProtocol == \"Point Quadrat Transect\") |> \n  filter(parentEventID %in% plots$eventID) |> \n  mutate(id_transect = str_sub(eventID, -2)) |> \n  mutate(id_plot = str_remove(parentEventID, \"CSIC-EEZ:SERPAM:AMOLADERAS_\")) |>\n  dplyr::select(id_transect, id_plot, eventID, fieldNumber, treatment_desc = fieldNotes, footprintWKT) |> \n  separate(fieldNumber, into = c(\"block\", \"treatment\"), sep = \" \\\\| \") \n\n# Convert to spatial data if needed\ngeo_transects <- raw_transects |> \n  st_as_sf(wkt = \"footprintWKT\", crs = 25830) \n\n# Create a dataframe without spatial information\ntransects <- raw_transects |> dplyr::select(-footprintWKT)"
  },
  {
    "objectID": "index.html#data-processing-for-quadrat-count-and-measurements",
    "href": "index.html#data-processing-for-quadrat-count-and-measurements",
    "title": "Download and process the dataset from GBIF",
    "section": "Data Processing for Quadrat Count and Measurements",
    "text": "Data Processing for Quadrat Count and Measurements\nWith the data extracted, we proceed to process the events and measurements related to quadrat counts.\n\n# Process events for quadrat counts\nquadrats_event <- event |> \n  filter(samplingProtocol == \"Quadrat count\") |> \n  filter(parentEventID %in% quadrats$eventID) |> \n  mutate(date = lubridate::ymd(eventDate)) |> \n  dplyr::select(id, parentEventID, date)\n\n# Process measurements for quadrat counts\nquadrats_measurements <- \n  emof |> \n  filter(id %in% quadrats_event$id) |> \n  dplyr::select(id, abundance = measurementValue)\n\n# Occurrence data for quadrat counts\nquadrats_occ <- \n  occ |> \n  filter(id %in% quadrats_event$id) |> \n  dplyr::select(id, species = scientificName)\n\n# Combine event, measurement, and occurrence data for quadrat counts\ndf_abundances <- \n  quadrats_event |> \n  inner_join(quadrats_measurements, by = \"id\") |> \n  inner_join(quadrats_occ, by = \"id\") |> \n  inner_join(quadrats, by = c(\"parentEventID\" = \"eventID\")) |> \n  dplyr::select(\n    id_plot, id_quadrat, block, treatment, treatment_desc, date, abundance, species\n  )\n\nThe results could be consulted here:"
  },
  {
    "objectID": "index.html#data-processing-for-transect-measurements",
    "href": "index.html#data-processing-for-transect-measurements",
    "title": "Download and process the dataset from GBIF",
    "section": "Data Processing for Transect Measurements",
    "text": "Data Processing for Transect Measurements\nSimilarly, we process the events and measurements related to transects.\n\n# Process events for transects\ntransects_event <- event |> \n  filter(samplingProtocol == \"Point Quadrat Transect\") |> \n  filter(parentEventID %in% transects$eventID) |> \n  mutate(date = lubridate::ymd(eventDate)) |> \n  dplyr::select(id, parentEventID, date)\n\n# Process measurements for transects\ntransects_measurements <- \n  emof |> \n  filter(id %in% transects_event$id) |> \n  filter(measurementType != \"specific vegetation cover\") |> \n  dplyr::select(id, measurementType, measurementValue) |> \n  pivot_wider(names_from = measurementType, values_from = measurementValue)\n\n# Combine event, measurement, and occurrence data for transects\ndf_transects <- \n  transects_event |> \n  inner_join(transects_measurements, by = \"id\") |> \n  inner_join(transects, by = c(\"parentEventID\" = \"eventID\")) |> \n  dplyr::select(\n    id_plot, id_transect, block:treatment_desc, \n    date, \n    `bare soil cover`:`diversity index`\n  )\n\nThe results could be consulted here:"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "This repository contains the code for formatting, processing, and analyzing the dataset Monitoring data on the effect of domestic livestock and rabbits on Androcymbium europaeum pastures. This dataset has been standardised according to GBIF specifications, and it’s deposited in GBIF available at doi:10.15470/jpjhuu and here.\nAdditionally, we have prepared a Data paper that is submitted to Biodiveristy Data Journal.\nThis work was funded by MICINN through European Regional Development Fund SUMHAL, LIFEWATCH-2019-09-CSIC-13, POPE 2014-2020. More info about the SUMHAL project (Sustainability for Mediterranean Hotspots in Andalusia integrating LifeWatch ERIC).\nCRedIT Statment (Contributor Roles Taxonomy):\n\nAntonio J. Pérez-Luque  : Data curation, Methodology, Validation, Visualization, Software, Conceptualization.\nMaria Eugenia Ramos Font  :: Data curation, Methodology, Validation.\nMauro J. Tognetti Barbieri: Data curation, Methodology, Validation.\nAna Belén Robles Cruz: Conceptualization, Funding acquisition, Methodology, Project administration, Resources, Supervision,\n\n\nCite\n\nTo cite the dataset:\n\nPérez Luque A J, Ramos Font M E, Tognetti M J, Montoya Román C, Tribaldos Anda C, Robles Cruz A B (2023). Monitoring data on the effect of domestic livestock and rabbits on Androcymbium europaeum pastures. Version 2.1. Estación Experimental del Zaidín (CSIC). Sampling event dataset https://doi.org/10.15470/jpjhuu accessed via GBIF.org on 2023-08-30.\n\nTo cite the repository:\n\nPérez Luque A J (2023). Formatting and processing the dataset Monitoring data on the effect of domestic livestock and rabbits on Androcymbium europaeum pastures from GBIF. v1.0. ajpelu.gitub.io/dp_androcymbium_lab"
  }
]